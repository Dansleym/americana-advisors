{% assign title = section.settings.title %}
{% assign description = section.settings.description %}
{% assign mailchimp_url = section.settings.mailchimp_subscribe_url %}
{% assign placeholder = section.settings.placeholder %}
{% assign button_text = section.settings.button_text %}

{% if mailchimp_url != blank and button_text != blank and title != blank or description != blank %}
	<section class="newsletter">
		<div class="section-container">
			<div class="newsletter__divider"></div>
		</div>

		<div class="newsletter__container">
			<div class="newsletter__wrapper">
				<div class="newsletter__text">
					{% if title != blank %}
						<h4 class="newsletter__title">{{ title }}</h4>
					{% endif %}

					{% if description != blank %}
						<p class="newsletter__description">{{ description }}</p>
					{% endif %}
				</div>

				<div class="newsletter__form-wrapper">
					<form class="newsletter__form js-newsletter-form" action="{{ mailchimp_url }}" method="post" target="_blank" novalidate>
						<div class="newsletter__input-wrapper">
							<input type="email" name="EMAIL" class="input newsletter__input js-newsletter-input" placeholder="{{ placeholder }}" aria-label="email">
							<span class="newsletter__error-text js-newsletter-error-text">Invalid email</span>
						</div>

						{% if button_text != blank %}
							<button type="submit" name="subscribe" class="button button-cta newsletter__button js-newsletter-button">
								{{ button_text }}
								<div class="icon-container">
									{% include 'icon-white-arrow' %}
								</div>
							</button>
						{% endif %}
					</form>
				</div>
			</div>
		</div>
	</section>
{% endif %}

{% schema %}
{
	"name": "Newsletter",
	"settings": [
		{
			"type": "text",
			"id": "mailchimp_subscribe_url",
			"label": "Mailchimp signup form URL",
			"info": "*Enter your [form URL](https://us17.admin.mailchimp.com/lists/designer/?id=216846) link"
		},
		{
			"type": "text",
			"id": "title",
			"label": "Title",
			"default": "JOIN OUR NEWSLETTER"
		},
		{
			"type": "text",
			"id": "description",
			"label": "Description",
			"default": "Follow us to stay up to date and see unique content."
		},
		{
			"type": "text",
			"id": "placeholder",
			"label": "Input placeholder",
			"default": "Email Address"
		},
		{
			"type": "text",
			"id": "button_text",
			"label": "*Button text",
			"default": "JOIN NOW"
		}
	],
	"presets": [
		{
			"name": "Newsletter",
			"category": "Newsletter"
		}
	]
}
{% endschema %}
